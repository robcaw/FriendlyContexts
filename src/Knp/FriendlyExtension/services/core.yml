services:
    friendly.call.call_center:
        class: Knp\FriendlyExtension\Call\CallCenter
        arguments:
            - @call.center

    friendly.command.command_loader:
        class: Knp\FriendlyExtension\Command\CommandLoader

    friendly.definition.definition_finder:
        class: Knp\FriendlyExtension\Definition\DefinitionFinder
        arguments:
            - @definition.finder

    friendly.doctrine.resolver:
        class: Knp\FriendlyExtension\Doctrine\Resolver
        arguments:
            - @doctrine.orm.entity_manager
            - @friendly.utils.object_reflector
            - @friendly.utils.text_formater
            - @friendly.utils.name_proposer
        tags:
            - { name: remove-when-missing, service: doctrine.orm.entity_manager }

    friendly.event_listener.doctrine_subscriber:
        class: Knp\FriendlyExtension\EventListener\DoctrineSubscriber
        arguments:
            - %friendly.doctrine.reset_schema%
            - @friendly.context.helper.doctrine_helper
        tags:
            - { name: event_dispatcher.subscriber }
            - { name: remove-when-missing, service: friendly.context.helper.doctrine_helper }

    friendly.faker.unique_cache:
        class: Knp\FriendlyExtension\Faker\UniqueCache

    friendly.gherkin.tag_loader:
        class: Knp\FriendlyExtension\Gherkin\TagLoader
        tags:
            - { name: event_dispatcher.listener, event: tester.scenario_tested.before, method: beforeScenario }

    friendly.http.http_content_type_guesser:
        class: Knp\FriendlyExtension\Http\HttpContentTypeGuesser

    friendly.page.resolver:
        class: Knp\FriendlyExtension\Page\Resolver\PageClassResolver
        arguments:
            - %friendly.page.namespace%

    friendly.reader.smart_reader:
        class: Knp\FriendlyExtension\Reader\SmartReader
        arguments:
            - @gherkin
            - @suite.registry
            - @specifications.locator.filesystem_feature
            - @friendly.definition.definition_finder
            - @friendly.call.call_center
            - %friendly.smart_tag%
        tags:
            - { name: environment.reader }

    friendly.record.collection.bag:
        class: Knp\FriendlyExtension\Record\Collection\Bag
        arguments:
            - @friendly.utils.object_reflector

    friendly.utils.name_proposer:
        class: Knp\FriendlyExtension\Utils\NameProposer
        arguments:
            - @friendly.utils.text_formater

    friendly.utils.object_reflector:
        class: Knp\FriendlyExtension\Utils\ObjectReflector

    friendly.utils.text_formater:
        class: Knp\FriendlyExtension\Utils\TextFormater

